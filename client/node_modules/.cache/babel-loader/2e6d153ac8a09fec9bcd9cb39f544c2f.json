{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dylan\\\\Desktop\\\\SAE\\\\2eme\\\\nodejs\\\\cryptocheck\\\\client\\\\src\\\\components\\\\GraphicCrypto.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List } from 'antd';\nimport { Chart, Axis, Tooltip, Geom } from \"bizcharts\";\nvar currency = 'BTC';\n\nconst GraphicCrypto = () => {\n  const [data, setData] = useState([]);\n  const dataTmp = [...data];\n  useEffect(() => {\n    const ws = new WebSocket(\"wss://ws-sandbox.coinapi.io/v1/\");\n\n    ws.onopen = function (event) {\n      ws.send(JSON.stringify({\n        type: \"hello\",\n        apikey: \"F9065291-99B7-44B7-9F3C-4C02D0131B28\",\n        \"heartbeat\": false,\n        \"subscribe_data_type\": [\"quote\"],\n        \"subscribe_filter_asset_id\": [currency]\n      }));\n\n      ws.onmessage = message => {\n        const dataFromServer = JSON.parse(message.data);\n\n        if (dataFromServer.symbol_id === 'GEMINI_SPOT_' + currency + '_USD') {\n          if (dataTmp.length === 0) {\n            dataTmp.push(dataFromServer);\n          } else {\n            dataTmp.splice(0, 1, dataFromServer);\n          }\n\n          setData(dataTmp);\n        }\n      };\n    };\n  }, [data]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(Chart, {\n    height: 400,\n    data: data,\n    forceFit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Axis, {\n    name: \"month\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(Axis, {\n    name: \"temperature\",\n    label: {\n      formatter: val => `${val}°C`\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(Tooltip, {\n    crosshairs: {\n      type: 'y'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(Geom, {\n    type: \"line\",\n    position: \"month*temperature\",\n    size: 2,\n    color: 'city',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(Geom, {\n    type: \"point\",\n    position: \"month*temperature\",\n    size: 4,\n    color: 'city',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  })), React.createElement(List, {\n    itemLayout: \"horizontal\",\n    dataSource: data,\n    renderItem: item => React.createElement(List.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(List.Item.Meta, {\n      title: React.createElement(React.Fragment, null, Math.round(item.ask_price), \" usd - \", Math.round(item.ask_price / 1.06751), \" CHF\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), \",\");\n};\n\nexport default GraphicCrypto;","map":{"version":3,"sources":["C:/Users/Dylan/Desktop/SAE/2eme/nodejs/cryptocheck/client/src/components/GraphicCrypto.js"],"names":["React","useEffect","useState","List","Chart","Axis","Tooltip","Geom","currency","GraphicCrypto","data","setData","dataTmp","ws","WebSocket","onopen","event","send","JSON","stringify","type","apikey","onmessage","message","dataFromServer","parse","symbol_id","length","push","splice","formatter","val","item","Math","round","ask_price"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,IAAR,QAAmB,MAAnB;AACA,SAAQC,KAAR,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,IAA9B,QAAyC,WAAzC;AAEA,IAAIC,QAAQ,GAAG,KAAf;;AACA,MAAMC,aAAa,GAAG,MAAM;AAC3B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAMU,OAAO,GAAG,CAAC,GAAGF,IAAJ,CAAhB;AACAT,EAAAA,SAAS,CAAC,MAAM;AAEf,UAAMY,EAAE,GAAG,IAAIC,SAAJ,CAAc,iCAAd,CAAX;;AACAD,IAAAA,EAAE,CAACE,MAAH,GAAY,UAAUC,KAAV,EAAiB;AAC5BH,MAAAA,EAAE,CAACI,IAAH,CACCC,IAAI,CAACC,SAAL,CAAe;AAEdC,QAAAA,IAAI,EAAE,OAFQ;AAGdC,QAAAA,MAAM,EAAE,sCAHM;AAId,qBAAa,KAJC;AAKd,+BAAuB,CAAC,OAAD,CALT;AAMd,qCAA6B,CAACb,QAAD;AANf,OAAf,CADD;;AAWAK,MAAAA,EAAE,CAACS,SAAH,GAAgBC,OAAD,IAAa;AAC3B,cAAMC,cAAc,GAAGN,IAAI,CAACO,KAAL,CAAWF,OAAO,CAACb,IAAnB,CAAvB;;AACA,YAAIc,cAAc,CAACE,SAAf,KAA6B,iBAAelB,QAAf,GAAwB,MAAzD,EAAiE;AAChE,cAAII,OAAO,CAACe,MAAR,KAAmB,CAAvB,EAA0B;AACzBf,YAAAA,OAAO,CAACgB,IAAR,CAAaJ,cAAb;AACA,WAFD,MAEO;AACNZ,YAAAA,OAAO,CAACiB,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqBL,cAArB;AACA;;AACDb,UAAAA,OAAO,CAACC,OAAD,CAAP;AACA;AAED,OAXD;AAcA,KA1BD;AA4BA,GA/BQ,EA+BP,CAACF,IAAD,CA/BO,CAAT;AAkCA,SACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,oBAAC,KAAD;AAAO,IAAA,MAAM,EAAE,GAAf;AAAoB,IAAA,IAAI,EAAEA,IAA1B;AAAgC,IAAA,QAAQ,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAEC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,aAAX;AAAyB,IAAA,KAAK,EAAE;AAACoB,MAAAA,SAAS,EAAEC,GAAG,IAAK,GAAEA,GAAI;AAA1B,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,EAGC,oBAAC,OAAD;AAAS,IAAA,UAAU,EAAE;AAACX,MAAAA,IAAI,EAAG;AAAR,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHD,EAIC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,MAAX;AAAkB,IAAA,QAAQ,EAAC,mBAA3B;AAA+C,IAAA,IAAI,EAAE,CAArD;AAAwD,IAAA,KAAK,EAAE,MAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJD,EAKC,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,OAAX;AAAmB,IAAA,QAAQ,EAAC,mBAA5B;AAAgD,IAAA,IAAI,EAAE,CAAtD;AAAyD,IAAA,KAAK,EAAE,MAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALD,CADD,EAQC,oBAAC,IAAD;AACC,IAAA,UAAU,EAAC,YADZ;AAEC,IAAA,UAAU,EAAEV,IAFb;AAGC,IAAA,UAAU,EAAEsB,IAAI,IAEf,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,IAAD,CAAM,IAAN,CAAW,IAAX;AAEC,MAAA,KAAK,EAAE,0CACLC,IAAI,CAACC,KAAL,CAAWF,IAAI,CAACG,SAAhB,CADK,aAC8BF,IAAI,CAACC,KAAL,CAAWF,IAAI,CAACG,SAAL,GAAe,OAA1B,CAD9B,SAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARD,MADD;AA4BA,CAjED;;AAmEA,eAAe1B,aAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {List} from 'antd';\r\nimport {Chart, Axis, Tooltip, Geom} from \"bizcharts\";\r\n\r\nvar currency = 'BTC';\r\nconst GraphicCrypto = () => {\r\n\tconst [data, setData] = useState([]);\r\n\tconst dataTmp = [...data];\r\n\tuseEffect(() => {\r\n\r\n\t\tconst ws = new WebSocket(\"wss://ws-sandbox.coinapi.io/v1/\");\r\n\t\tws.onopen = function (event) {\r\n\t\t\tws.send(\r\n\t\t\t\tJSON.stringify({\r\n\r\n\t\t\t\t\ttype: \"hello\",\r\n\t\t\t\t\tapikey: \"F9065291-99B7-44B7-9F3C-4C02D0131B28\",\r\n\t\t\t\t\t\"heartbeat\": false,\r\n\t\t\t\t\t\"subscribe_data_type\": [\"quote\"],\r\n\t\t\t\t\t\"subscribe_filter_asset_id\": [currency]\r\n\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tws.onmessage = (message) => {\r\n\t\t\t\tconst dataFromServer = JSON.parse(message.data);\r\n\t\t\t\tif (dataFromServer.symbol_id === 'GEMINI_SPOT_'+currency+'_USD') {\r\n\t\t\t\t\tif (dataTmp.length === 0) {\r\n\t\t\t\t\t\tdataTmp.push(dataFromServer);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdataTmp.splice(0, 1, dataFromServer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetData(dataTmp);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t};\r\n\r\n\t},[data]);\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Chart height={400} data={data} forceFit>\r\n\t\t\t\t<Axis name=\"month\" />\r\n\t\t\t\t<Axis name=\"temperature\" label={{formatter: val => `${val}°C`}} />\r\n\t\t\t\t<Tooltip crosshairs={{type : 'y'}} />\r\n\t\t\t\t<Geom type=\"line\" position=\"month*temperature\" size={2} color={'city'} />\r\n\t\t\t\t<Geom type=\"point\" position=\"month*temperature\" size={4} color={'city'} />\r\n\t\t\t</Chart>\r\n\t\t\t<List\r\n\t\t\t\titemLayout=\"horizontal\"\r\n\t\t\t\tdataSource={data}\r\n\t\t\t\trenderItem={item => (\r\n\r\n\t\t\t\t\t<List.Item>\r\n\t\t\t\t\t\t<List.Item.Meta\r\n\r\n\t\t\t\t\t\t\ttitle={<>\r\n\t\t\t\t\t\t\t\t{Math.round(item.ask_price)} usd - {Math.round(item.ask_price/1.06751)} CHF\r\n\t\t\t\t\t\t\t</>}\r\n\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t)}\r\n\t\t\t/>,\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default GraphicCrypto;"]},"metadata":{},"sourceType":"module"}