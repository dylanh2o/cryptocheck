{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dylan\\\\Desktop\\\\SAE\\\\2eme\\\\nodejs\\\\cryptocheck\\\\client\\\\src\\\\components\\\\GraphicCrypto.js\";\nimport React, { useEffect, useState } from 'react';\nimport { List } from 'antd';\nvar currency = 'BTC';\n\nconst GraphicCrypto = () => {\n  const [data, setData] = useState([]);\n  const dataTmp = [...data];\n  useEffect(() => {\n    const ws = new WebSocket(\"wss://ws-sandbox.coinapi.io/v1/\");\n\n    ws.onopen = function (event) {\n      ws.send(JSON.stringify({\n        type: \"hello\",\n        apikey: \"F9065291-99B7-44B7-9F3C-4C02D0131B28\",\n        \"heartbeat\": false,\n        \"subscribe_data_type\": [\"quote\"],\n        \"subscribe_filter_asset_id\": [currency]\n      }));\n\n      ws.onmessage = message => {\n        const dataFromServer = JSON.parse(message.data);\n\n        if (dataFromServer.symbol_id === 'GEMINI_SPOT_BTC_USD') {\n          if (dataTmp.length === 0) {\n            dataTmp.push(dataFromServer);\n          } else {\n            dataTmp.splice(0, 1, dataFromServer);\n          }\n\n          setData(dataTmp);\n        }\n      };\n    };\n  }, 1000); //chercher celui qui est egal a usd btc \n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(List, {\n    itemLayout: \"horizontal\",\n    dataSource: data,\n    renderItem: item => React.createElement(List.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(List.Item.Meta, {\n      title: React.createElement(React.Fragment, null, Math.round(item.ask_price), \" usd - \", Math.round(item.ask_price / 1.06751), \" CHF\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), \",\");\n};\n\nexport default GraphicCrypto;","map":{"version":3,"sources":["C:/Users/Dylan/Desktop/SAE/2eme/nodejs/cryptocheck/client/src/components/GraphicCrypto.js"],"names":["React","useEffect","useState","List","currency","GraphicCrypto","data","setData","dataTmp","ws","WebSocket","onopen","event","send","JSON","stringify","type","apikey","onmessage","message","dataFromServer","parse","symbol_id","length","push","splice","item","Math","round","ask_price"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,IAAR,QAAmB,MAAnB;AAEA,IAAIC,QAAQ,GAAG,KAAf;;AACA,MAAMC,aAAa,GAAG,MAAM;AAC3B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAMM,OAAO,GAAG,CAAC,GAAGF,IAAJ,CAAhB;AACAL,EAAAA,SAAS,CAAC,MAAM;AAEf,UAAMQ,EAAE,GAAG,IAAIC,SAAJ,CAAc,iCAAd,CAAX;;AACAD,IAAAA,EAAE,CAACE,MAAH,GAAY,UAAUC,KAAV,EAAiB;AAC5BH,MAAAA,EAAE,CAACI,IAAH,CACCC,IAAI,CAACC,SAAL,CAAe;AAEdC,QAAAA,IAAI,EAAE,OAFQ;AAGdC,QAAAA,MAAM,EAAE,sCAHM;AAId,qBAAa,KAJC;AAKd,+BAAuB,CAAC,OAAD,CALT;AAMd,qCAA6B,CAACb,QAAD;AANf,OAAf,CADD;;AAWAK,MAAAA,EAAE,CAACS,SAAH,GAAgBC,OAAD,IAAa;AAC3B,cAAMC,cAAc,GAAGN,IAAI,CAACO,KAAL,CAAWF,OAAO,CAACb,IAAnB,CAAvB;;AACA,YAAIc,cAAc,CAACE,SAAf,KAA6B,qBAAjC,EAAwD;AACvD,cAAId,OAAO,CAACe,MAAR,KAAmB,CAAvB,EAA0B;AACzBf,YAAAA,OAAO,CAACgB,IAAR,CAAaJ,cAAb;AACA,WAFD,MAEO;AACNZ,YAAAA,OAAO,CAACiB,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqBL,cAArB;AACA;;AACDb,UAAAA,OAAO,CAACC,OAAD,CAAP;AACA;AAED,OAXD;AAcA,KA1BD;AA4BA,GA/BQ,EA+BP,IA/BO,CAAT,CAH2B,CAoC3B;;AACA,SACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEC,oBAAC,IAAD;AACC,IAAA,UAAU,EAAC,YADZ;AAEC,IAAA,UAAU,EAAEF,IAFb;AAGC,IAAA,UAAU,EAAEoB,IAAI,IAEf,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,IAAD,CAAM,IAAN,CAAW,IAAX;AAEC,MAAA,KAAK,EAAE,0CACLC,IAAI,CAACC,KAAL,CAAWF,IAAI,CAACG,SAAhB,CADK,aAC8BF,IAAI,CAACC,KAAL,CAAWF,IAAI,CAACG,SAAL,GAAe,OAA1B,CAD9B,SAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,MADD;AAsBA,CA3DD;;AA6DA,eAAexB,aAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {List} from 'antd';\r\n\r\nvar currency = 'BTC';\r\nconst GraphicCrypto = () => {\r\n\tconst [data, setData] = useState([]);\r\n\tconst dataTmp = [...data];\r\n\tuseEffect(() => {\r\n\r\n\t\tconst ws = new WebSocket(\"wss://ws-sandbox.coinapi.io/v1/\");\r\n\t\tws.onopen = function (event) {\r\n\t\t\tws.send(\r\n\t\t\t\tJSON.stringify({\r\n\r\n\t\t\t\t\ttype: \"hello\",\r\n\t\t\t\t\tapikey: \"F9065291-99B7-44B7-9F3C-4C02D0131B28\",\r\n\t\t\t\t\t\"heartbeat\": false,\r\n\t\t\t\t\t\"subscribe_data_type\": [\"quote\"],\r\n\t\t\t\t\t\"subscribe_filter_asset_id\": [currency]\r\n\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tws.onmessage = (message) => {\r\n\t\t\t\tconst dataFromServer = JSON.parse(message.data);\r\n\t\t\t\tif (dataFromServer.symbol_id === 'GEMINI_SPOT_BTC_USD') {\r\n\t\t\t\t\tif (dataTmp.length === 0) {\r\n\t\t\t\t\t\tdataTmp.push(dataFromServer);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdataTmp.splice(0, 1, dataFromServer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetData(dataTmp);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t};\r\n\r\n\t},1000);\r\n\r\n\t//chercher celui qui est egal a usd btc \r\n\treturn (\r\n\t\t<div>\r\n\r\n\t\t\t<List\r\n\t\t\t\titemLayout=\"horizontal\"\r\n\t\t\t\tdataSource={data}\r\n\t\t\t\trenderItem={item => (\r\n\r\n\t\t\t\t\t<List.Item>\r\n\t\t\t\t\t\t<List.Item.Meta\r\n\r\n\t\t\t\t\t\t\ttitle={<>\r\n\t\t\t\t\t\t\t\t{Math.round(item.ask_price)} usd - {Math.round(item.ask_price/1.06751)} CHF\r\n\t\t\t\t\t\t\t</>}\r\n\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t)}\r\n\t\t\t/>,\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default GraphicCrypto;"]},"metadata":{},"sourceType":"module"}